name: rvm-phantomjs
version: 1.0.4
inherits: wercker/rvm@2.5.0
type: main
platform: ubuntu@12.04
packages:
    - ruby@2.2.1
keywords:
    - ruby
    - rvm
    - phantomjs
script: |
    cd $HOME
    rm -Rf phantomjs
    sudo sh -c 'echo "deb http://apt.gemnasium.com stable main" > /etc/apt/sources.list.d/gemnasium.list'
    sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com E5CEAB0AC5F1CA2A
    sudo apt-get -y update
    sudo apt-get -y install g++ flex bison gperf ruby perl libsqlite3-dev libfontconfig1-dev libicu-dev libfreetype6 libssl-dev libpng-dev libjpeg-dev
    sudo apt-get -y install gemnasium-toolbelt
    sudo apt-get -y upgrade
    sudo apt-get -y clean
    git clone git://github.com/ariya/phantomjs.git
    cd phantomjs
    git checkout 2.0.0
    yes | ./build.sh
    ruby -v
    gemnasium -v
    phantomjs -v
